gadir_inv_mission_02 = {
    header = "mission_image_carthage"
    icon = "carthage_4"
    repeatable = no

    chance = {
        factor = 10
    }

    potential = {
        tag = GAD
        NOT = { has_variable = gadir_02_mission_cooldown }
    }

    abort = {
        OR = {
            is_subject = yes
            ai_mission_back_out_trigger = yes
        }
    }

    on_abort = {
        custom_tooltip = gadir_01_mission_abortion.tt
        set_variable = { 
            name = gadir_02_mission_cooldown
            days = 7300 #20 yrs
        }
    }
    
    on_start = {
        save_scope_as = mission_country_scope
    }

    on_completion = {
        complete_mission_effect = yes
        capital_scope = {
			capital_formable_small_effect = yes
            add_2_free_province_investments = yes
		}
    }

    gadir_inv_mission_02_task_1 = { 
        icon = "task_expansion"

        allow = {
            region:baetica_region = {
                NOT = {
                    any_region_province = {
                        OR = {
                            owner = c:CAR
                            owner = {
                                is_subject_of = c:CAR
                            }
                        }
                    }
                }
            }
            NOT = {
                c:CAR = {
                    owns_or_subject_owns_area = mauretania_tingitana_meridionalis_area 
                    owns_or_subject_owns_area = mauretania_tingitana_septentrionalis_area
                    owns_or_subject_owns_area = rutubis_area 
                    owns_or_subject_owns_area = tadla_area
                }
            }

            p:3080 = {
                owned_or_subject_owned = root
            }
            p:3061 = {
                owned_or_subject_owned = root
            }
            p:6490 = {
                owned_or_subject_owned = root
            }
            p:6301 = {
                owned_or_subject_owned = root
            }
        }

        on_completion = { 
            
            trigger_event = {
                id = gadir_inv.50
                days = -1
            }
        }
    }

    gadir_inv_mission_02_task_2 = { #Mauretania
        icon = "task_diplomatic"

        requires = { gadir_inv_mission_02_task_1 }

        allow = {
            OR = {
                c:MAU = {
                    alliance_with = root
                    opinion = {
                        target = root
                        value >= 120
                    }
                }
                owns_or_subject_owns_area = mauretania_tingitana_meridionalis_area 
                owns_or_subject_owns_area = mauretania_tingitana_septentrionalis_area
            }
        }

        on_completion = {
            trigger_event = { #make Mauretania a vassal OR get a bonus if you won the territory
                id = gadir_inv.51
                days = -1
            }
        }
    }

    gadir_inv_mission_02_task_3 = { #Massaesylia
        icon = "task_diplomatic"

        requires = { gadir_inv_mission_02_task_1 }

        allow = {
            OR = {
                c:MSS = {
                    alliance_with = root
                    opinion = {
                        target = root
                        value >= 120
                    }
                }
                owns_or_subject_owns_area = mauretania_caesariensis_occidentalis_area 
                owns_or_subject_owns_area = mauretania_caesariensis_centralis_area
            }
        }

        on_completion = {
            trigger_event = { #make Massaessylia vassal OR get a bonus if you won the territory
                id = gadir_inv.52
                days = -1
            }
        }
    }

    gadir_inv_mission_02_task_4 = {
        icon = "task_conquest"

        requires = { gadir_inv_mission_02_task_3 gadir_inv_mission_02_task_2 }

        allow = {
            region:mauretainia_region = {
                NOT = {
                    any_region_province = {
                        OR = {
                            owner = c:CAR
                            owner = {
                                is_subject_of = c:CAR
                            }
                        }
                    }
                }
            }
        }

        on_completion = {
            region:numidia_region = {
                every_region_province = {
                    limit = {
                        owned_or_subject_owned = c:CAR
                    }
                    add_claim = root
                }
            }
        }
    }

    gadir_inv_mission_02_task_5 = { #iol
        icon = "task_political"

        requires = { gadir_inv_mission_02_task_3 }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 3116
                    province_id = 3118
                }
            }
        }

        allow = {
            c:IOL = {
                opinion = {
                    target = root
                    value >= 120
                }
            }
        }

        on_completion = {
            trigger_event = {
                id = gadir_inv.53
                days = -1
            }
        }
    }

    gadir_inv_mission_02_task_6 = { #ibasim
        icon = "task_political"

        requires = { gadir_inv_mission_02_task_2 }

        highlight = {
            scope:province = {
                province_id = 1464
            }
        }

        allow = {
            c:IBA = {
                opinion = {
                    target = root
                    value >= 120
                }
            }
        }

        on_completion = {
            trigger_event = {
                id = gadir_inv.55
                days = -1
            }
        }
    }
}